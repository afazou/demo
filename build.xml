<?xml version="1.0" encoding="UTF-8"?>
<project name="phpmd.example" default="prepare" basedir=".">
    <target name="prepare"
            unless="prepare.done"
            description="Prepare for build">
        <mkdir dir="${basedir}/build/api"/>
        <mkdir dir="${basedir}/build/coverage"/>
        <mkdir dir="${basedir}/build/logs"/>
        <mkdir dir="${basedir}/build/pdepend"/>
        <mkdir dir="${basedir}/build/phpdox"/>
        <property name="prepare.done" value="true"/>
    </target>

    <target name="phpunit"
            unless="phpunit.done"
            depends="prepare"
            description="Run unit tests with PHPUnit">
        <!--failonerror：当出现错误时自动停止-->
        <exec executable="/usr/local/bin/phpunit" failonerror="true">
            <!--<arg value="&#45;&#45;configuration"/>
            <arg value="${basedir}/phpunit.xml"/>
            <arg value="&#45;&#45;coverage-html"/>
            <arg value="${basedir}/build/coverage"/>
            <arg value="&#45;&#45;coverage-clover"/>
            <arg value="${basedir}/build/coverage/coverage.xml"/>

            <arg line="-t 'Title' &#45;&#45;geometry=120x80 -e '/script/path/bin/do.sh'"/>-->

        </exec>

        <property name="phpunit.done" value="true"/>
    </target>

</project>


